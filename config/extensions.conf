[from-internal]
exten => 100,1,Answer()
same => n,Wait(1)
same => n,Playback(hello-world)
same => n,Echo()
same => n,Hangup()

; Ao discar 6500, entra na fila "Ouvidoria"
exten => 6500,1,Answer()
 same => n,Queue(Ouvidoria,mt)
 same => n,Hangup()

; Chamada para qualquer ramal
exten => _X.,1,NoOp(*** Ligando para ${EXTEN} ***)
 same => n,Dial(PJSIP/${EXTEN},20,m(dial))   ; 20s de timeout, com ringback garantido

 ; Se a chamada não completou, checa o status
 same => n,GotoIf($["${DIALSTATUS}"="BUSY"]?busy)
 same => n,GotoIf($["${DIALSTATUS}"="CONGESTION"]?congestion)
 same => n,GotoIf($["${DIALSTATUS}"="NOANSWER"]?noanswer)
 same => n,GotoIf($["${DIALSTATUS}"="CHANUNAVAIL"]?unavail)
 same => n,Hangup()

; =============================
; Tratamentos por status
; =============================

exten => _X.,n(busy),NoOp(Destino ocupado)
 same => n,Busy()
 same => n,Hangup()

exten => _X.,n(congestion),NoOp(Falha/congestionamento na rota)
 same => n,Congestion()
 same => n,Hangup()

exten => _X.,n(noanswer),NoOp(Ninguém atendeu)
 same => n,Playback(vm-nobodyavail)   ; "Ninguém disponível"
 same => n,Hangup()

exten => _X.,n(unavail),NoOp(Ramal indisponível ou não registrado)
 same => n,Playback(all-circuits-busy-now)
 same => n,Hangup()
